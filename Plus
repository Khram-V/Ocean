//______________________________________________________________________________
//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Текущие задачи
 1 -- согласовать астрономию и приливные гармоники с час.поясом
 2 -- астрономия на плоском дне приводит к вытеканию жидкости
 3 -- продумать варианты визуализации и сделать графическое представление течений
 4 -- сделать массштабирование цветовых оттенков на линейный размер экрана
 5 -- (пропорциональное) перемасштабирование картинки при изменении размеров окна мышкой
 6 -- сохранение картинок в файл !!!
 7 -- проверить гармонические постоянные для мореографа вблизи пролива Фриза.
 8 -- протестировать и разрешить проблему пунктирных линий
 9 -- разобраться с таблицей символов (градусы, точки, степени и пр. и рамки тоже)
10 -- разобраться и решить проблему блокировки ошибок в функциях acos, log, exp ...

Прошлые и локальные проблемы
 1 ++ работа с палитрой
 2 ++ перевести программу Ани в режим правильного массштабного представления карты
 3 ++ перехват <alt>команд
 4 ++ освободить процессор при остановке программы
 5 ++ обеспечить вмещение графики в физичекие размеры экрана при масштабировании окна
 6 ++ сделать эмуляцию режима переключения палитры экрана (т.е. - смену цветовой гаммы)
 7 ++ проверить внештатное изменение вертикального размера при изменении величины окна
 8 ++ найти лучшую формулу для изменения палитры с наперед заданным средним уровнем
 9 ++ решить проблему со стандартным и собственным переключением клавиатуры на русский язык
10 ++ разрешить вопросы с представлением фона в шрифтах и в штриховках BGI
11 ++ перекрасить программу Ani  !!!
12 +- неопределенная проблема с последней точкой в линии векторных шрифтов
13 +- встроенная рисовалка (- хоть немного пересмотреть систему подсказок)
14 ++ лишние 4 байта в файле гармонических постоянных (при отсутствии гармоник)

//_________ DOS + DPMI-16 ______________________________________________________
//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
//
96.09.10 + Программа Mario выставляет больший шаг для длинных рядов,
           и не производит ни интерполяции, ни считывания с пропусками
96.09.10 + Необходимо обеспечить сохранение и восстановление больших
           участков графики при работе с 256 цветами.
96.10.06 - Необходимо в программе ANI:
         ^ 1 ^ согласовать астрономию и приливные гармоники с час.поясом
         + 2 + раскрасить поверхность моря солнечными бликами
         ^ 3 ^ сделать графическое представление течений
97.04.23 - Для программы Ани
         + 1 - проверить печать на матричных принтерах
         + 2 - цвет букв в менюшках ---//---
           3 - проверить обнуление прогнозов береговых амплитуд
           4 - для Японского моря P=3.5, q=3.0
           5 - для обоих морей константа A=8.663 вместо 8.807, Jmax=10.7
                                         + ~~~~~                  - ~~~~
97.06.08 + Inf-View + ошибки при считывании перевернутых карт
         =        + ускорить вывод на экран
         + DCM    - согласовать цвета в менюшных запросах
         + SPECRM - необходимо заново отладить программу
         = LOOK   - сбои при считывании больших файлов
97.07.31 + ANI + ошибки в процессе выполнения счета
         + 1 + сбой программы при вызове списка F7 из блока моделирования
         + 2 + после переинтерполяции на нижней границе возникли NAN
         + 3 + после отсечения нижней границы не было максимума шкалы
               (сохранение NAN в константах масштабирования изображения)
         + 4 + прояснить расчеты шага во времени при смене карт
97.08.22 + Ani + ошибка при согласовании стыка для полного Земного шара
97.08.25 +     + ошибка при записи батиметрии для полного Земного шара
97.08.27 -     - высокочастное возмущение схемы расчета приливов
97.11.29           возникает вследствии неучета возмущений на св.границах
         ^     ^ сделать массштабирование цветовых оттенков на размер экрана
         +     + согласовать сценарии для подготовке цветных картинок
         -     - затенение левобережьем мариографных постов наблюдения
         +     + расчистка поля потоков при изменении граничной глубины DZ
         ^     ^ астрономия на плоском дне приводит к вытеканию жидкости
         +     + если астрономия добавляется к решению, - то крах программы
         +     + на стыке параллелей наблюдаются высокочастотные волны
         - Mario - чередование нулей при считывании прореженных файлов
97.10.08 - Ani - Проконтролировать положение курсора при выходе из LTS
         -     - В просмотр LTS включить данные по глубинам и наклонам
97.10.27 + Mario + Разрушено управление окном при считывание данных I/O
97.11.28 + Ani + При уменьшении DZ разрушается вновь открытый уровень моря
97.11.29 = Ani = Необходимо протестировать распределение памяти в Dp.Edit
         +     + Перенести интерполяцию г/д полей в блок моделирования
         +     + Сбой программы при записи результатов в Time_HEX
97.11.30 = Bgi = Возникли проблемы с текстами в программе BgiDemo
         =     = Необходимо отладить Ani-W (проблемы с 256-цветной палитрой)
         =     = Программа World-W транслируется и имеет сбои на выполнении
98.01.16 + Ani + Не записывается файл .inf после обрезки лишних Mario точек
98.05.18 - TV  - Раскрытие палитры по экстремумам
98.05.19 + Tv  - необходимо внести "emphasient" по экстремумам
00.07.02 - Ani - ошибки в процессе выполнения счета
         1 - после переинтерполяции на границах
         2 - переинтерполяция данных при изменении глубины области отсечения
         3 - программа зависает на матрице 800 x 1000 ячеек
02.02.06 + Tv + сделана выборка сектора и проверен масштаб границ
//
//___ Win-32 & Wine+Linux ______________________________________________________
//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

2007-02-21:
++Ani   - не открывается файл, созданный новой программой Ani
++Mario - просмотреть и исключить ограничения на длину рядов в программе Марио
++Mario - при выходе из списка 'L' происходит сбой программы Марио

2007-02-23
++Ani - исправить надпись и маску обращения к файлу со списком землетрясений
++Ani - переделать или удалить старинную работу со штриховками уровней

2007-02-24
++Ani - разрыв связи с каталогом землетрясений при отказе от считывания нового файла
++Ani - проверить все fclose на закрытие закрытых файлов

2007.03.02
++Tv  - привести изображение карты к пропорциональному массштабу

2007.03.03
++Tv  - снять перегрузку с процесора при перетаскивании рамки
--Tv  - сдеслать окно с подсказкой по командам

2007-03-04
++Sakhalin - вернуть русский шрифт Simplex и другие

2007-03-09
++Mario - четное исполнение с пересохранением картинки и без задержки в Tv_getc.
++Tv    - запретить рекурсию и предусмотреть Гамма-коррекцию цветов в Tv_getc.

2007-03-10
++Tv    - исправить раскаску берега с нулевой высотой
++Hull,Ani - полностью исключить и разорвать вякие связи с файлами F1H (внутрь программ)
++Mario - прояснить прроблему с первым открытием файла со списком гармонических постоянных
++Ani   - подтянуть рамку карты вниз при выборе меленьких шрифтов

2007-03-12
++Ani - свернулся массштаб изображения после автоматического преобразования к Меркатору 
        для файла F:\Maps\DEPTH\WORLD\WORLD-10.INF (ограничено до 85°)

2007-03-14
++Ani - сделать нормальную координатную рамку (не хуже, чем в Ani-GL)
--Tv  ? тонут (и раньше тоже тонули) узкие береговые косы с нулевой высотой
        !! для оконтуривания берегов использовать функцию Value в первой степени

2007-03-16
++Ani/Axis  - что-то там путается при расстановке параллелей, может быть и меридианов тоже
++Ani/Save  - решить проблему с кодировкой русских имен файлов
++Ani/Getc  - не срабатывает <alt+C> на русской раскладке клавиатуры
++Ani/Wave  - прячется легенда скоростей и уровней моря
++Ani/Out   - проверить все варианты записи данных и файлов на соответсвие ОЕМ кодировке
--Ani/Front - восстановить проход лучей и фронтов через краевой разрыв на сферической Земле
--Ani/Seism - связать каталог землетрясений с подготовкой начальных условий для очага цунами

2007-03-17
++Ani/Window - отрегулировать размер экрана при его полном раскрытии

2007-03-18
--Ani/Axis - дотянуть отмеки на рамке географической карты до крайних углов
--Ani/Wave - !! обязательно сделать отсечение удаленных (заостровных) акваторий
             из учета при генерации возмущений в граничных условиях

2007-03-19
??Ani/Egr - перенести легенду с описанием высот волн в левое поле над компасной стрелкой
            не получается, т.к. необходимо делать длинные текстовые надписи

2007-03-20
++World - неправильно обрабатывается переход через линию смены дат
++Mario - выход из функции с одним и тем же пересчитанным рядом

2007-03-22
++World+Ani/Seismo - обеспечить режимы добавления и замены ранее считанных данных
++Mario - считывание данных по списку из командной строки
++Mario - перекрасить программу

2007-03-23
++Mario - исправлена нижняя шкала, представляемая в номерах точек числового ряда
++World - совсем сломалась после перераски Mario
++Ani   - исправлено считывание многословных имен мореографных пунктов
++Ani   - линии глубины сделать голубыми или светло-серо-голубыми, а высоты - светло-зелеными
++Ani   - сохранить читаемость векторных шрифтов при малых растровых буквочках
++Ani   - расчетная запись времени накладывается на информацию о карте из Chart.axis
++Ani   - крестик с линиями фронтов и лучей пачкает картинку красным

2007-03-25
++Mario - перестроено управление алгоритмами фильтрации, сделано восстановление ряда

2007-03-29
++Ani - согласованы цвета в Topo и EGraph

2007-04-06
++SpecrM - непреходящие проблемы с расметкой спектральных осей
++SpecrM - срочно сделать запись времени в формате (hh.mm).(ss.hh)
?-Mario - похоже что в прорисовках и редакктировании рядов есть обращение к лишней точке (ошибка утеряна)
--Mario  - в формате 'x' используется слишком старый вариант записи времени
--SpecrM - !! не свопадают наблюденные (=10 мин) и расчетные (>=13 мин) периоды волн

2007-04-07
--Ani - не ускоряется движение эллипса с очагом землетрясения
--Ani - при выходе очага на побережье - все зависает
--Ani/Time - исправить время в информационной строке в процессе расчетов

2007-04-12
++Ani   - исправлена прорисовка циклонов (по временной схеме отсечения acos ]-1:1[. )
--Mario - после сохранения "w" перестают считываться выборки по номерам рядов из командной строки
--Mario - происходит ошибка при совпадении номеров считываемых мореограмм

2007-04-26
--Mario - 'F' не расширяется общая длина при сложении двух рядов

2007-05-29
++Tv - нарушена палитра для файлов NetCDF
--Tv - использовать исходный шаг сетки при сохранени файла *.inf

2007-06-03
--Ani - после автоматического перехода к меркаторской проекции, 
        на исходном базисе остаются старые отсчеты для очагов, мореограмм и - карт батиметрии ::Chart
2008-08-30
++Ani - необходимо вернуть возможность дробления шага записи мореограмм
                  во избежании ошибки интерполяции при смене батиметрии
2008-09-02
++Ani - в программе смены батиметрии из расчетного модуля происходит изменение
                   количества мореографных постов, что приводитк к ошибке
++Mario - пора научить программу читать xml-файлы

2008-09-05
--Ani - та же проблема с нарушением границ батиметрического массива, только теперь при просмотре
              мореограмм после редактирования расчетной батимерии (то же из 09-02 кажется работает)
2008-10-09
--Mario - xml читается, теперь надо настроить выборку рядов из командной строки, и затем начать xml-запись
--Ani   - !!! надо убрать чередование чисел при шаге записе мореграмм меньшем, чем расчетный

2008-10-10
++Mario - !!! надо обязательно внести в функции Word и String специальную обработку конца блока,
          с последующекй блокировкой дальнейшего ввода до перехода к следующему блоку по команде Next.

2008-10-11
++Xml - синтаксическая несуразность при закрытии блока параметров при описателе блока,
        для ее ракскрытия нужен несколько излишний контестный контроль

2008-11-26
--Ani - не происходит обновления избражения и кудато пропали рамки,
        при считывании новой батиметрии в редакторе карт

<alt+C> переключает яркость цветов светлых в темные и наоборот. 
        После этого <Стрелка-Вниз>/<Вверх> позволяет затмнять/осветлять
        изображение с ипользованием степенной функции в интервале от 0 до 1.0
        с последовательным домножением показателя степени на величину 1.1.
<alt+C) - повторное переключение цветов восстанавливает исходную палитру,
        после чего стрелками вверх/вниз также возможно осветление/затемнение
        картинки на экране по той же степенной функции для гистограммы цветов.
Выход из режима инвертирования цветов осуществляется по любой другой клавише
        (или по движению мышки).

2010-08-01 Урегулированы проблемы с эмулятором BGI-графики (в Тv - остались)
2010-08-10 Разработан и введен в программы Ani, Mario и SpecrM 
           новый формат мореографных данных
        ++ Проверена корректность работы программы СпекрМ
2010-08-15 Переформатиорованы все фрагменты батиметрии Транзас,
           проконтролировано качества всех карт, из которых выбраны более-менее
           качественные, написана и ситполнена специальная транзакция для переноса карт
           на большую батиметрию Охотского моря
2010-08-20 Доработан и отлажен пакет Function - интрполяция
           полиномами, эрмитовыми полиномами по первым производным 
           и полными лагранжевыми полиномами заданной стпени
2010-08-25 Введена возможность стохастической генерации входящих волн
        ++ В программе Tv сделана визуализация реального положения сеточных узлов
	   и мореографных постов 
2010-08-29 В калькуляторе длин волн все мореографные точки притягиваются 
           к контрольной глубине.
        ++ Переписан на русский язык блок постановки сейсмического очага. 
2010-08-30 Сделан запрос на автоматическую перестановку мореографных постов
        ++ Количество аппроксимационных узлов - выступает как дистанция для поиска
           берегового уреза. 
2010-09-12 Нaйден вариант распараллеливания расчетного алгоритма Ani
        ++ Введен обновленный формат записи архивов мореограмм в программе Mario
        ++ Добавлена целочисленная упаковка мореограмм в 3-х и 4-х байтовым словам
2010-09-20 Расчетная графика выделена в отдельную параллельную задачу
        ++ все графические примитивы собраны в едином модуле Drawing(EGraph)
2010-09-22 Распараллелена и значительно ускорена интерполяция батиметрии
        ++ Распараллелен автоматический перенос расчетных полей уровня и скорости 
2010-09-26 Введена интерактивная постановка макросейсмических очагов Поплавского
           по указанию в отдельном пункте в меню сейсмических очагов.    
2010-10-18 Сделана батиметрия 250м для Сахалинской области
        ++  - идея большой полувиртуальной батиметрической базы данных 
2010-10-20 Добавлена и проверена возможность интеорполяции исходной батиметрии 
           при переносе расчета на новую уточненную прибрежную батиметрию. ЭТО ВАЖНО!!!
        ++ немного оптимизирован расчет фронтов, распараллелеленн алгоритм поиска
           ближайшей фронтовой точки, однако - результат - пшик.
2011-03-13 уточнены координаты в файле-справке по результатам моделирования
2011-03-15 разрешена проблема утечки памяти при распараллеливании счетных алгоритмов
2011-03-20 проблемы при работе с множеством мореограмм, начата интерактивизация
	   режима "карта" в мореграфном комплексе Марио (сделано нечто, для начала)
        ++ надо срочно ускорить изображение мореограмм - по накапливаемым экстремумам
           в интервале растровой прорисовки мореограмм (убрана сетка по умолчанию)
2011-03-25 надо снять накопление масштабных экстремумов на столбиках мореаграмм в Ani
        ++ Tv слишком тяжело справляется с большими массивами батиметрии
2011-04-05 Сделана быстрая цветная карта при старте программы Ani 
2011-04-10 Заверешены многочисленные переделки для ускорения программы Tv - Inf-Grd
2011-04-15 Полностью переработан блок Mario.Karta	
2011-04-22 Значительно ускорена прорисовка графиков в Mario и в Mario.Karta по условию
           смены точек на экране при прорисовке кривых после растровых пересчетов
        ++ Восстановлен режим быстрой смены недориисованных кадров в Tv.NetCDF
        ++ Ускорена прорисока первого кадра по невидимому экрану Tv.NetCDF
        ++ Согласовано положение мышиного курсора с узлами сетки в Tv.Inf-Grd
2011-04-23 Устроено редактирование промерных точек батиметрических файлов в Tv.Inf-Grd
2011-04-29 переработан и протестирован выбор мореграмм из списка в файле .inf с комментариями
        ++ восстановлено традиционное изображение контурных батиметрических карт
        ++ начато очередное перестроение в Tv_getc, - <<проблемы с подсказками в Tv_draw>>
2011-05-01 исправлена ошибка при выходе из редактора карт без редактирования
        ++ безуспешная бодяга с перестройкой очага цунами - начало нового сценария
2011-05-03 отчасти отработаны агоритмы работы с архивом сейсмических очагов цунами
        ++ сделаны запросы и каталогизация новых событий, включена в работу мышка  
2011-05-11 исправлены ошибки с управлением режимами графики, страницами и растровыми буферами
        ++ закончены безуспешные эксперименты с "метео"-очагами цунами
        ++ немного сбалансированы несуразицы с последним вариантом очага цунами Поплавского
        ++ начато согласование времен в программе Ani на базе стандартного класса Event 
        ++ завершена отработка сценария для постановки очага цунами из каталога
        ++ установлена палитра с разделением RGBa для виндовс и iBGR для растровых массивов 
2011-05-14 снят режим EGA, убраны старые штриховые раскраски
        ++ переработана, по временно-двойной схеме, свето-теневая раскраска полей уровня моря
        ++ снят режим сохранения "batymetry", дабы не путаться с контрольными-restore точками
        ++ с огромным трудом найдено место для установки начальных признаков:
           - сферичности - если размер акватории более 1000 км
           - придонного треня - если шаг сетки меньше одного километра.
        ++ начальная минимально допустимая расчетная глубина установлена на изобату 1 метр
        ++ при каждой смене карт, пересчитывается интервал профилей волн и точек для скорости
2011-05-16 борьба с проблемами цветов и палитры, восстановлено прямое использование iBGR
        ++ распараллелен и ускорен алгоритм наложения карт - сняты все прорисовки на экране
2011-05-17 восстановлен запрос на установку времени отсчета для внешней (приливной) волны
        ++ убран, наконец-то, раздельный запрос полей времени в сейсмическом каталоге
        ++ отдельный запрос на переустановку мореографов в меню установок моделирования
2011-05-18 найдено и испралено ошибчное переопределение текущего времени при прорисовке

!!!!!!!!!!!

2010-10-25 -- переход на тензорную арифметику для распараллеливания расчета фронтов
           -- воссоздать генерацию входящей волны на границах для эллиптического источника 
2011-10-07 -- Mario: сделать быстрое выделение точек
           -- Mario: разобраться со списком List, сделать сортировку и удаление/выделение одинаковых точек
           -- Mario: восстановить в List выбор прервого и удаление последнего
           -- Ani: сделать запрос на удаление совпадающих мореографных точек

2016-11-23 ++ проблоемы с циклоническими градиентами - похоже перепутан знак
2016-12-17 -- есть сбои с границами массивов в сплайно и нтерполяции по траекториям тайфунов 

2017-07-20 ++ Ani: сбрасывается нечетная единица в строке при записи обновленной батиметрии
           -- Ani: происходит переинтерполяция по широте при подготовке расчетной батиметрии
           ++ Tv:  по отрицательному шагу y батиметрия не переворачивается
 
2020-07-13 ++ Hull теперь ушел в UTF-8
	   ++ Tv-dc2/dw2 переведен на ANSI-Windows (как в DesignCAD для Windows).
